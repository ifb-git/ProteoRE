<tool id="biofilter" name="Retrieve tissue/cell distribution (resource: Human Protein Atlas)" version="0.1.0">
    <description>Filter by tissue name (using Human Protein Atlas resource)
    </description>
    <requirements>
    </requirements>
    <stdio>
        <exit_code range="1:" />
    </stdio>
    <command><![CDATA[
        python /projet/galaxydev/galaxy/tools/proteore_uc1/filter_tissue/biofilter2.py 
        --mq "$input1" 
	#if $ncol
	    --ncol $ncol
	#end if
        --hpa "$proteinatlas.value"
        -o "$hpa_output"
        --tissues_del "$opt_del.tdel"
        --trash "$trash_output"
        --trash_file_detail "$trash_detail_output"
        --na_file "$na_file"
        #if $opt_keep.tkeep:
            --tissues_keep "$opt_keep.tkeep"
        #end if
    ]]></command>
    <inputs>
        <param type="data" name="input1" format="txt,tabular" label="Input file" help="Input file is a tab-delimited file containing different information of proteins, such as an output of MaxQuant software" />
	    <param type="text" name="ncol" value="c1" label="Please specify the column where you would like to apply this filter" help='For example, fill in "c1" if you want to filter the first column. This column should contain gene names.' />
        <param name="proteinatlas" type="select" label="Human Protein Atlas" >
            <options from_file="proteinatlas.loc" selected="True" >
		        <column name="name" index="1" />
		        <column name="value" index="2" />
		        <filter type="remove_value" meta_ref="proteinatlas" key="name" value="Full Human Protein Atlas" />
                <filter type="remove_value" meta_ref="proteinatlas" key="name" value="Human Tumor Atlas">
	        </options>
	    </param>
        <section name="opt_del" title="Choose tissues where expressed genes need to be discarded" expanded="True">
            <param name="tdel" type="select" label="Choose tissues where expressed genes need to be discarded" multiple="True" display="checkboxes">
                <option value="adrenal gland" >Adrenal gland</option>
                <option value="appendix" >Appendix</option>
                <option value="bone marrow" >Bone marrow</option>
                <option value="breast" >Breast</option>
                <option value="bronchus" >Bronchus</option>
                <option value="caudate" >Caudate</option>
                <option value="cerebellum" >Cerebellum</option>
                <option value="cerebral cortex" >Cerebral cortex</option>
                <option value="cervix" >Cervix</option>
                <option value="colon" >Colon</option>
                <option value="duodenum" >Duodenum</option>
                <option value="endometrium 1" >Endometrium 1</option>
                <option value="endometrium 2" >Endometrium 2</option>
                <option value="epididymis" >Epididymis</option>
                <option value="esophagus" >Esophagus</option>
                
                <option value="fallopian tube" >Fallopian tube</option>
                <option value="gallbladder" >Gallbladder</option>
                
                <option value="heart muscle" >Heart muscle</option>
                <option value="hippocampus" >Hippocampus</option>
                
                <option value="kidney" >Kidney</option>
            
                <option value="liver" >Liver</option>
                <option value="lung" >Lung</option>
                <option value="lymph node" >Lymph node</option>
                <option value="nasopharynx" >Nasopharynx</option>
                <option value="oral mucosa" >Oral mucosa</option>
                <option value="ovary" >Ovary</option>
                <option value="pancreas" >Pancreas</option>
                <option value="parathyroid gland" >Parathyroid gland</option>
                
                <option value="placenta" >Placenta</option>
                <option value="prostate" >Prostate</option>
                <option value="rectum" >Rectum</option>
            
                <option value="salivary gland" >Salivary gland</option>
                <option value="seminal vesicle" >Seminal vesicle</option>
                <option value="skeletal muscle" >Skeletal muscle</option>
                <option value="skin 1" >Skin 1</option>
                <option value="skin 2" >Skin 2</option>
                
                <option value="small intestine" >Small intestine</option>
                <option value="smooth muscle" >Smooth muscle</option>
                <option value="soft tissue 1" >Soft tissue 1</option>
                <option value="soft tissue 2" >Soft tissue 2</option>
                <option value="spleen" >Spleen</option>
                <option value="stomach 1" >Stomach 1</option>
                <option value="stomach 2" >Stomach 2</option>
                <option value="testis" >Testis</option>
                <option value="thyroid gland" >Thyroid gland</option>
                <option value="tonsil" >Tonsil</option>
                <option value="urinary bladder" >Urinary bladder</option>
                <option value="vagina" >Vagina</option>
            </param>
        </section>
        <section name="opt_keep" title="Choose tissues where expressed genes need to be kept even if expressed in list of tissues to be discarded" expanded="False">
            <param name="tkeep" type="select" label="Choose tissues where expressed genes need to be kept even if expressed in list of tissues to be discarded" multiple="True" optional="True" display="checkboxes" >
                <option value="adrenal gland" >Adrenal gland</option>
                <option value="appendix" >Appendix</option>
                <option value="bone marrow" >Bone marrow</option>
                <option value="breast" >Breast</option>
                <option value="bronchus" >Bronchus</option>
                <option value="caudate" >Caudate</option>
                <option value="cerebellum" >Cerebellum</option>
                <option value="cerebral cortex" >Cerebral cortex</option>
                <option value="cervix" >Cervix</option>
                <option value="colon" >Colon</option>
                <option value="duodenum" >Duodenum</option>
                <option value="endometrium 1" >Endometrium 1</option>
                <option value="endometrium 2" >Endometrium 2</option>
                <option value="epididymis" >Epididymis</option>
                <option value="esophagus" >Esophagus</option>
                
                <option value="fallopian tube" >Fallopian tube</option>
                <option value="gallbladder" >Gallbladder</option>
                
                <option value="heart muscle" >Heart muscle</option>
                <option value="hippocampus" >Hippocampus</option>
            
                <option value="kidney" >Kidney</option>
       
                <option value="liver" >Liver</option>
                <option value="lung" >Lung</option>
                <option value="lymph node" >Lymph node</option>
                <option value="nasopharynx" >Nasopharynx</option>
                <option value="oral mucosa" >Oral mucosa</option>
                <option value="ovary" >Ovary</option>
                <option value="pancreas" >Pancreas</option>
                <option value="parathyroid gland" >Parathyroid gland</option>
                
                <option value="placenta" >Placenta</option>
                <option value="prostate" >Prostate</option>
                <option value="rectum" >Rectum</option>
            
                <option value="salivary gland" >Salivary gland</option>
                <option value="seminal vesicle" >Seminal vesicle</option>
                <option value="skeletal muscle" >Skeletal muscle</option>
                <option value="skin 1" >Skin 1</option>
                <option value="skin 2" >Skin 2</option>
            
                <option value="small intestine" >Small intestine</option>
                <option value="smooth muscle" >Smooth muscle</option>
                <option value="soft tissue 1" >Soft tissue 1</option>
                <option value="soft tissue 2" >Soft tissue 2</option>
                <option value="spleen" >Spleen</option>
                <option value="stomach 1" >Stomach 1</option>
                <option value="stomach 2" >Stomach 2</option>
                <option value="testis" >Testis</option>
                <option value="thyroid gland" >Thyroid gland</option>
                <option value="tonsil" >Tonsil</option>
                <option value="urinary bladder" >Urinary bladder</option>
                <option value="vagina" >Vagina</option>
            </param>
        </section>
    <!--param name="opt" type="select" label="" multiple="True" display="checkboxes">
        <option value="trash_file" >Excluded proteins </option>
        <option value="trash_file_detail" >Full information of excluded proteins </option>
    </param>
    <when value="salivary"></when>
    <when value="lung"></when>
    <when value="trash_file"></when>
    <when value="trash_file_detail"></when-->
    </inputs>
    <outputs>
        <data name="hpa_output" format="txt" label="HPA selection from ${input1.name}" />
        <data name="trash_detail_output" format="txt" label="HPA information of excluded proteins from ${input1.name}" />
        <data name="trash_output" format="txt" label="Excluded protein from ${input1.name}" />
        <data name="na_file" format="txt" label="Genes without tissues information" />
    </outputs>
    <help><![CDATA[
This tool filters the proteins according to their tissue(s) of origin.

**Input**
A file contains protein data in text/tabular format, could be output of **"MaxQuant Output Filter"**

**Option**
Firstly, you can choose tissue(s) that genes expressed in need to be discarded. If among these discarded genes, you want to keep genes from some tissue(s), you can choose them in the second list.
For example, ..
    ]]></help>
    <citations>
    </citations>
</tool>
