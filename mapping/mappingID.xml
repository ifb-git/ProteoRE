<tool id="mappingID" name="ID Mapping" version="0.1.0">
    <description>Convert identifiers which are of a different type/source to another type of identifiers and create the identifier lists.
    </description>
    <requirements>
    </requirements>
    <stdio>
        <exit_code range="1:" />
    </stdio>
    <command><![CDATA[
        Rscript /projet/galaxydev/galaxy/tools/proteore_uc1/mapping/mappingIDs.R
        "$idti.idtypein"
        #if $input.ids == "text"
            "$input.txt"
            "list"
        #else if $input.ids == "file_list"
            "$input.list"
            "file_id"
        #else
            "$input.file,$input.ncol"
            "file_all"
        #end if
        "$idto.idtypeout"
        "$output"
        
    ]]></command>
    <inputs>
	    <conditional name="idti" >
            <param name="idtypein" type="select" label="Select type/source of identifier of your list" >
		        <option value="neXtProt" >neXtProt</option>
		        <option value="UniProt" >UniProt</option>
		        <option value="ENSG" >ENSG Ensembl gene identifiers</option>
		        <option value="ENSP" >ENSP Ensembl protein identifiers</option>
		        <option value="ENST" >ENST Ensembl transcript identifiers</option>
		        <option value="geneID" >NCBI GeneID gene accession numbers</option>
		        <option value="HGNC" >HGNC gene accession numbers</option>
		        <option value="IPI" >IPI protein identifiers</option>
		        <option value="MGI" >MGI mouse gene accession numbers</option>
		        <option value="RS" >NCBI RefSeq protein accession numbers</option>
	        </param>
	        <when value="neXtProt" >
	        </when>
	        <when value="ENSG" >
	        </when>
	        <when value="ENSP" >
	        </when>
	        <when value="ENST" >
	        </when>
	        <when value="geneID" >
	        </when>
	        <when value="HGNC" >
	        </when>
	        <when value="IPI" >
	        </when>
	        <when value="MGI" >
	        </when>
	        <when value="RS" >
	        </when>
	    </conditional>
	    <section name="idto" title="Target type of IDs" expanded="True" >
            <param name="idtypeout" type="select" label="Target type of IDs you would like to map to" display="checkboxes" multiple="True" >
		        <option value="neXtProt" >neXtProt</option>
		        <option value="UniProt" >UniProt</option>
		        <option value="ENSG" >ENSG Ensembl gene identifiers</option>
		        <option value="ENSP" >ENSP Ensembl protein identifiers</option>
    		    <option value="ENST" >ENST Ensembl transcript identifiers</option>
	    	    <option value="geneID" >NCBI GeneID gene accession numbers</option>
	    	    <option value="HGNC" >HGNC gene accession numbers</option>
	    	    <option value="IPI" >IPI protein identifiers</option>
	    	    <option value="MGI" >MGI mouse gene accession numbers</option>
	    	    <option value="RS" >NCBI RefSeq protein accession numbers</option>
	        </param>
	        <when value="neXtProt" >
	        </when>
	        <when value="ENSG" >
	        </when>
	        <when value="ENSP" >
	        </when>
	        <when value="ENST" >
	        </when>
	        <when value="geneID" >
	        </when>
	        <when value="HGNC" >
	        </when>
	        <when value="IPI" >
	        </when>
	        <when value="MGI" >
	        </when>
	        <when value="RS" >
	        </when>
	    </section>
        <conditional name="input" >
            <param name="ids" type="select" label="Provide your identifiers (copy/paste or ID list from a one-column file or ID list from a multi-column file (e.g. table)) " >
                <option value="text">Copy/paste identifiers</option>
                <option value="file_list">Choose a one column file that contains your list of IDs</option>
                <option value="file_all">Choose a file with multiple columns that contains your list of IDs</option>
            </param>
            <when value="text" >
                <param name="txt" type="text" label="Copy/paste identifiers" help='IDs must be separated by spaces or new lines, into the form field, for example:P31946 P62258 
or 
P04259
P13647 ' />
            </when>
            <when value="file_list" >
                <param name="list" type="data" format="txt,tabular" label="Choose a one column file that contains your list of IDs" help="This file should contain only 1 column, each rows is an ID" />
            </when>
            <when value="file_all" >
                <param name="file" type="data" format="txt,tabular" label="Choose a file with multiple columns that contains your list of IDs" />
                <param name="ncol" type="text" label="The column number of IDs to map" help='For example, fill in "c1" if it is the first column, "c2" if it is the second column and so on' />
            </when>
        </conditional>
    </inputs>
    <outputs>
        <data name="output" format="txt" />
    </outputs>
    <help><![CDATA[
This tool converts a list of IDs to another identifier type, select the source and target type from the dropdown menus above (see below supported source and target types).

After choosing the type of input IDs, you can choose one or more types of IDs you would like to map to. 

If your input is a list of IDs or a single-column file, the tool will return a file containing the mapped IDs.

If your input is a multiple-column file, the mapped IDs column(s) will be added at the end of the input file.

Available databases: 

 neXtProt
 
 UniProt

 ENSG: Ensembl gene identifiers
   
 ENSP: Ensembl protein identifiers
 
 # ENSP(unmapped): Ensembl protein identifiers that cannot be mapped to any isoform in neXtProt
 
 ENST: Ensembl transcript identifiers
 
 # ENST(unmapped): Ensembl transcript identifiers considered as coding by Ensembl that cannot be mapped to any isoform in neXtProt
 
 GeneID: NCBI GeneID gene accession numbers
 
 HGNC: HGNC gene accession numbers
 
 IPI: IPI protein identifiers
 
 MGI: MGI mouse gene accession numbers
 
 NCBI RefSeq: NCBI RefSeq protein accession numbers
 
    ]]></help>
    <citations>
    </citations>
</tool>
